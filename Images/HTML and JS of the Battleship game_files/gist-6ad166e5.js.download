System.register(["./chunk-frameworks.js","./chunk-vendor.js"],function(I,$){"use strict";var h,b,k,S,E,p,L,T,_,c,j,x;return{setters:[function(r){h=r.o,b=r.aU,k=r.C,S=r.W,E=r.E,p=r.p,L=r.k,T=r.aW,_=r.r},function(r){c=r.a,j=r.o,x=r.r}],execute:function(){var r=Object.defineProperty,a=(e,t)=>r(e,"name",{value:t,configurable:!0});function v(e){const t=e.querySelector(".js-gist-files"),s=document.getElementById("js-gist-file-template"),n=document.createElement("div");n.innerHTML=s.textContent;for(const i of n.querySelectorAll("[id]"))i.id!=="blob-dragged-file-input"&&i.removeAttribute("id");const o=n.querySelector(".js-code-textarea");o!=null&&o.setAttribute("id",`blob_contents_${Date.now()}`);for(const i of n.children)t.append(i);return t.lastElementChild}a(v,"createEmptyFile");function A(e){for(const t of e.querySelectorAll(".js-gist-file")){const s=t.querySelector(".js-gist-filename"),n=t.querySelector(".js-blob-contents");if(!s.value&&!n.value)return t}return v(e)}a(A,"withEmptyFile");function d(e){return b(e.closest(".js-code-editor"))}a(d,"withEditor");async function g(e){const t=e.getAttribute("data-language-detection-url");if(!t)return;const s=new URL(t,window.location.origin),n=new URLSearchParams(s.search.slice(1));n.append("filename",e.value),s.search=n.toString();const o=await fetch(s.toString(),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!o.ok){const u=new Error,f=o.statusText?` ${o.statusText}`:"";throw u.message=`HTTP ${o.status}${f}`,u}const l=await o.json();(await d(e)).setMode(l.language)}a(g,"onFilenameChange"),h(".js-gist-filename",async e=>{const t=e,s=e.closest(".js-code-editor");await d(s),k(t,g),e.addEventListener("blur",()=>S(t,g),{once:!0})}),c("click",".js-add-gist-file",function(e){e.preventDefault();const t=e.currentTarget.closest(".js-blob-form");v(t).scrollIntoView()}),c("gist:filedrop",".js-blob-form",async function(e){const{file:t,data:s}=e.detail,n=A(e.currentTarget),o=n.querySelector(".js-gist-filename");o.value=t.name,g(o),(await d(o)).setCode(s),n.scrollIntoView()}),c("click",".js-remove-gist-file",function(e){e.preventDefault();const t=e.currentTarget.closest(".js-gist-file");for(const s of t.querySelectorAll(".js-gist-deleted input"))s.disabled=!1;t.querySelector(".js-code-editor").remove()});function y(e){const t=e.querySelectorAll(".js-remove-gist-file");for(const s of t)s.classList.toggle("d-none",t.length<2)}a(y,"updateRemoveButtonVisibility"),j(".js-remove-gist-file",function(e){const t=e.closest(".js-gist-files");return{add(){y(t)},remove(){y(t)}}});var D=Object.defineProperty,m=(e,t)=>D(e,"name",{value:t,configurable:!0});h(".js-quicksearch-field",R),E(".js-quicksearch-field",P),c("navigation:keydown",".js-quicksearch-results",F),c("submit",".js-quicksearch-form",C),c("focusout:delay",".js-quicksearch-field",function(e){const s=e.currentTarget.closest("form").querySelector(".js-quicksearch-results");s&&(s.classList.remove("active"),p(s))});function R(e){L(e.form.querySelector(".js-quicksearch-results"))}m(R,"bindQuickSearchEvents");function C(e){const t=e.currentTarget.querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),p(t))}m(C,"teardown");function F(e){const t=e,s=t.target,n=s.closest("form");if(t.detail.hotkey==="Escape"){const o=n.querySelector(".js-quicksearch-results");o.classList.remove("active"),T(o)}else t.detail.hotkey==="Enter"&&!s.classList.contains("js-navigation-item")&&(_(n),t.preventDefault())}m(F,"onNavigationKeyDown");let q=null;async function P(e){const t=e.target,s=t.value.replace(/^\s+|\s+$/g,""),n=t.closest("form"),o=n.querySelector(".js-quicksearch-results"),l=o.getAttribute("data-quicksearch-url");let i="";q==null||q.abort();const{signal:u}=q=new AbortController;if(s.length){const f=new URL(l,window.location.origin),U=new URLSearchParams(f.search.slice(1));U.append("q",s),f.search=U.toString(),n.classList.add("is-sending");try{const w=await fetch(f.toString(),{signal:u});w.ok&&(i=await w.text())}catch(w){}}u.aborted||(i&&(o.innerHTML=i),o.classList.toggle("active",s!==""),n.classList.remove("is-sending"))}m(P,"fetchResults"),x(".js-gist-file-update-container .js-comment-update",async function(e,t){let s;try{s=await t.json()}catch(n){return}if(e.action=s.json.url,s.json.authenticity_token){const n=e.querySelector("input[name=authenticity_token]");n.value=s.json.authenticity_token}}),j(".js-gist-dropzone",()=>{$.import("./chunk-drag-drop.js")})}}});
//# sourceMappingURL=gist-47821eb7.js.map
